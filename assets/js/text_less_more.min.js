 $(document).ready(function() 
 {
    (function()
    {

    var more_less_text_value = $("#more_less_text_value").val();
    if(more_less_text_value!="")
    {
        showChar = more_less_text_value;
    }
    else
    {
        showChar = 200;
    }        
    var ellipsestext = "...";
    
    $('.truncate').each(function() {
        var content = $(this).html();
        if(content.length > showChar) {
 
            var c = content.substr(0, showChar);
            var h = content;    
            var html = '<div class="truncate-text" style="display:block;">' + c + '<span class="moreellipses">' + ellipsestext + '&nbsp;&nbsp;<a href="" class="moreless more" style="color:#666;">Read More</a></span></span></div><div class="truncate-text" style="display:none">' + h + '<a href="" class="moreless less" style="color:#666;">...Less</a></span></div>';
 
            $(this).html(html);
        }
 
    });
 
    $(".moreless").click(function(){
        var thisEl = $(this); 
        if(thisEl.hasClass("less")) {
            thisEl.closest('.truncate-text').prev('.truncate-text').toggle();
            thisEl.closest('.truncate-text').slideToggle();
        } else {
            thisEl.closest('.truncate-text').toggle();
            thisEl.closest('.truncate-text').next('.truncate-text').slideToggle();
        }
        return false;
    });
    /* end iffe */
    }());

/* end ready */    
});